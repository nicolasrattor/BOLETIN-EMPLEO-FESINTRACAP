base[1,1] %>% select(2)
ls()[1]
ls()[2]
View(base)
ls()[2]
ls()[2] %>% as.data.frame()
list(ls())
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
View(dfs)
dfs[1]
dfs[2]
dfs[2]
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(dfs)
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(base)
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
base<-ls() %>% as.data.frame()
View(base)
names(base)<-"periodo"
View(base)
base %>% filter(periodo!="dfs")
base<-base %>% filter(periodo!="dfs")
base<-base %>% mutate(tcp_mujeres=NA)
for (i in 1:nrow(base)){
base[i,2]<-dfs[i] %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
dfs[1]
class(dfs[1] )
dfs[1] %>% as.data.frame()
for (i in 1:nrow(base)){
base[i,2]<-dfs[i] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
#2010
for (i in 1:11){
base[i,2]<-dfs[i] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
dfs[1] %>% as.data.frame()
dfs[1]
dfs[1] %>% filter(b5==3 & (b6==1|b6==2))
dfs[1] %>% as.data.frame()
?as.data.frame()
dfs[[1]] %>% as.data.frame()
#2010
for (i in 1:11){
base[i,2]<-dfs[[i]] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
View(base)
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(base)
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(dfs)
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
base<-ls() %>% as.data.frame()
names(base)<-"periodo"
base<-base %>% filter(periodo!="dfs")
base<-base %>% mutate(tcp_mujeres=NA)
View(base)
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(i)
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(i,base,dfs)
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
base<-ls() %>% as.data.frame()
names(base)<-"periodo"
base<-base %>% filter(periodo!="dfs")
base<-base %>% mutate(tcp_mujeres=NA)
#2010
for (i in 1:nrow(base)){
base[i,2]<-dfs[[i]] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
View(base)
View(ene2010_02)
base<-base %>% mutate(ano_trimestre=NA,mes_central=NA)
View(base)
dfs[[1]] %>% as.data.frame()
dfs[[1]] %>% as.data.frame() %>% select(ano_trimestre)
dfs[[1]] %>% as.data.frame() %>% select(ano_trimestre) %>% slice(1)
View(base)
for (i in 1:nrow(base)){
base[i,3]<-dfs[[i]] %>% as.data.frame() %>% select(ano_trimestre) %>% slice(1)
base[i,4]<-dfs[[i]] %>% as.data.frame() %>% select(mes_central) %>% slice(1)
}
View(base)
library(lubridate)
base %>% make_date(year=ano_trimestre,month = mes_central)
base %>% mutate(trimestre=make_date(year=ano_trimestre,month = mes_central))
base<-base %>% mutate(trimestre=make_date(year=ano_trimestre,month = mes_central))
base %>% ggplot(aes(x=trimestre,y=tcp_mujeres))+geom_line()+geom_point()
## Exportar base
library(writexl)
## Exportar base
library(writexl)
write_xlsx(base,"Output/tcp_mujeres.xlsx", col_names = TRUE,format_headers = TRUE)
ene2014_07<-read.csv("Input/ene2014_07.csv",sep = ",")
ene2014_08<-read.csv("Input/ene2014_08.csv",sep = ",")
download.file("https://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/bbdd/2014/formato-csv/ene-2014-08.csv?sfvrsn=ab729ef3_4&download=true",destfile = "Input/ene2014_08.csv",method = "libcurl")
download.file("https://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/bbdd/2014/formato-csv/ene-2014.csv?sfvrsn=7b352e3f_6&download=true",destfile = "Input/ene2014_08.csv",method = "libcurl")
library(tidyverse)
## Cargar bases
ene2010_02<-read.csv("Input/ene2010_02.csv",sep = ",")
ene2010_03<-read.csv("Input/ene2010_03.csv",sep = ",")
ene2010_04<-read.csv("Input/ene2010_04.csv",sep = ",")
ene2010_05<-read.csv("Input/ene2010_05.csv",sep = ",")
ene2010_06<-read.csv("Input/ene2010_06.csv",sep = ",")
ene2010_07<-read.csv("Input/ene2010_07.csv",sep = ",")
ene2010_08<-read.csv("Input/ene2010_08.csv",sep = ",")
ene2010_09<-read.csv("Input/ene2010_09.csv",sep = ",")
ene2010_10<-read.csv("Input/ene2010_10.csv",sep = ",")
ene2010_11<-read.csv("Input/ene2010_11.csv",sep = ",")
ene2010_12<-read.csv("Input/ene2010_12.csv",sep = ",")
ene2011_01<-read.csv("Input/ene2011_01.csv",sep = ",")
ene2011_02<-read.csv("Input/ene2011_02.csv",sep = ",")
ene2011_03<-read.csv("Input/ene2011_03.csv",sep = ",")
ene2011_04<-read.csv("Input/ene2011_04.csv",sep = ",")
ene2011_05<-read.csv("Input/ene2011_05.csv",sep = ",")
ene2011_06<-read.csv("Input/ene2011_06.csv",sep = ",")
ene2011_07<-read.csv("Input/ene2011_07.csv",sep = ",")
ene2011_08<-read.csv("Input/ene2011_08.csv",sep = ",")
ene2011_09<-read.csv("Input/ene2011_09.csv",sep = ",")
ene2011_10<-read.csv("Input/ene2011_10.csv",sep = ",")
ene2011_11<-read.csv("Input/ene2011_11.csv",sep = ",")
ene2011_12<-read.csv("Input/ene2011_12.csv",sep = ",")
ene2012_01<-read.csv("Input/ene2012_01.csv",sep = ",")
ene2012_02<-read.csv("Input/ene2012_02.csv",sep = ",")
ene2012_03<-read.csv("Input/ene2012_03.csv",sep = ",")
ene2012_04<-read.csv("Input/ene2012_04.csv",sep = ",")
ene2012_05<-read.csv("Input/ene2012_05.csv",sep = ",")
ene2012_06<-read.csv("Input/ene2012_06.csv",sep = ",")
ene2012_07<-read.csv("Input/ene2012_07.csv",sep = ",")
ene2012_08<-read.csv("Input/ene2012_08.csv",sep = ",")
ene2012_09<-read.csv("Input/ene2012_09.csv",sep = ",")
ene2012_10<-read.csv("Input/ene2012_10.csv",sep = ",")
ene2012_11<-read.csv("Input/ene2012_11.csv",sep = ",")
ene2012_12<-read.csv("Input/ene2012_12.csv",sep = ",")
ene2013_01<-read.csv("Input/ene2013_01.csv",sep = ",")
ene2013_02<-read.csv("Input/ene2013_02.csv",sep = ",")
ene2013_03<-read.csv("Input/ene2013_03.csv",sep = ",")
ene2013_04<-read.csv("Input/ene2013_04.csv",sep = ",")
ene2013_05<-read.csv("Input/ene2013_05.csv",sep = ",")
ene2013_06<-read.csv("Input/ene2013_06.csv",sep = ",")
ene2013_07<-read.csv("Input/ene2013_07.csv",sep = ",")
ene2013_08<-read.csv("Input/ene2013_08.csv",sep = ",")
ene2013_09<-read.csv("Input/ene2013_09.csv",sep = ",")
ene2013_10<-read.csv("Input/ene2013_10.csv",sep = ",")
ene2013_11<-read.csv("Input/ene2013_11.csv",sep = ",")
ene2013_12<-read.csv("Input/ene2013_12.csv",sep = ",")
ene2014_01<-read.csv("Input/ene2014_01.csv",sep = ",")
ene2014_02<-read.csv("Input/ene2014_02.csv",sep = ",")
ene2014_03<-read.csv("Input/ene2014_03.csv",sep = ",")
ene2014_04<-read.csv("Input/ene2014_04.csv",sep = ",")
ene2014_05<-read.csv("Input/ene2014_05.csv",sep = ",")
ene2014_06<-read.csv("Input/ene2014_06.csv",sep = ",")
ene2014_07<-read.csv("Input/ene2014_07.csv",sep = ",")
ene2014_08<-read.csv("Input/ene2014_08.csv",sep = ",")
ene2014_09<-read.csv("Input/ene2014_09.csv",sep = ",")
ene2014_10<-read.csv("Input/ene2014_10.csv",sep = ",")
ene2014_11<-read.csv("Input/ene2014_11.csv",sep = ",")
ene2014_12<-read.csv("Input/ene2014_12.csv",sep = ",")
ene2015_01<-read.csv("Input/ene2015_01.csv",sep = ",")
ene2015_02<-read.csv("Input/ene2015_02.csv",sep = ",")
ene2015_03<-read.csv("Input/ene2015_03.csv",sep = ",")
ene2015_04<-read.csv("Input/ene2015_04.csv",sep = ",")
ene2015_05<-read.csv("Input/ene2015_05.csv",sep = ",")
ene2015_06<-read.csv("Input/ene2015_06.csv",sep = ",")
ene2015_07<-read.csv("Input/ene2015_07.csv",sep = ",")
ene2015_08<-read.csv("Input/ene2015_08.csv",sep = ",")
ene2015_09<-read.csv("Input/ene2015_09.csv",sep = ",")
ene2015_10<-read.csv("Input/ene2015_10.csv",sep = ",")
ene2015_11<-read.csv("Input/ene2015_11.csv",sep = ",")
ene2015_12<-read.csv("Input/ene2015_12.csv",sep = ",")
ene2016_01<-read.csv("Input/ene2016_01.csv",sep = ",")
ene2016_02<-read.csv("Input/ene2016_02.csv",sep = ",")
ene2016_03<-read.csv("Input/ene2016_03.csv",sep = ",")
ene2016_04<-read.csv("Input/ene2016_04.csv",sep = ",")
ene2016_05<-read.csv("Input/ene2016_05.csv",sep = ",")
ene2016_06<-read.csv("Input/ene2016_06.csv",sep = ",")
ene2016_07<-read.csv("Input/ene2016_07.csv",sep = ",")
ene2016_08<-read.csv("Input/ene2016_08.csv",sep = ",")
ene2016_09<-read.csv("Input/ene2016_09.csv",sep = ",")
ene2016_10<-read.csv("Input/ene2016_10.csv",sep = ",")
ene2016_11<-read.csv("Input/ene2016_11.csv",sep = ",")
ene2016_12<-read.csv("Input/ene2016_12.csv",sep = ",")
ene2017_01<-read.csv("Input/ene2017_01.csv",sep = ",")
ene2017_02<-read.csv("Input/ene2017_02.csv",sep = ",")
ene2017_03<-read.csv("Input/ene2017_03.csv",sep = ",")
ene2017_04<-read.csv("Input/ene2017_04.csv",sep = ",")
ene2017_05<-read.csv("Input/ene2017_05.csv",sep = ",")
ene2017_06<-read.csv("Input/ene2017_06.csv",sep = ",")
ene2017_07<-read.csv("Input/ene2017_07.csv",sep = ",")
ene2017_08<-read.csv("Input/ene2017_08.csv",sep = ",")
ene2017_09<-read.csv("Input/ene2017_09.csv",sep = ",")
ene2017_10<-read.csv("Input/ene2017_10.csv",sep = ",")
ene2017_11<-read.csv("Input/ene2017_11.csv",sep = ",")
ene2017_12<-read.csv("Input/ene2017_12.csv",sep = ",")
ene2018_01<-read.csv("Input/ene2018_01.csv",sep = ",")
ene2018_02<-read.csv("Input/ene2018_02.csv",sep = ",")
ene2018_03<-read.csv("Input/ene2018_03.csv",sep = ",")
ene2018_04<-read.csv("Input/ene2018_04.csv",sep = ",")
ene2018_05<-read.csv("Input/ene2018_05.csv",sep = ",")
ene2018_06<-read.csv("Input/ene2018_06.csv",sep = ",")
ene2018_07<-read.csv("Input/ene2018_07.csv",sep = ",")
ene2018_08<-read.csv("Input/ene2018_08.csv",sep = ",")
ene2018_09<-read.csv("Input/ene2018_09.csv",sep = ",")
ene2018_10<-read.csv("Input/ene2018_10.csv",sep = ",")
ene2018_11<-read.csv("Input/ene2018_11.csv",sep = ",")
ene2018_12<-read.csv("Input/ene2018_12.csv",sep = ",")
ene2019_01<-read.csv("Input/ene2019_01.csv",sep = ",")
ene2019_02<-read.csv("Input/ene2019_02.csv",sep = ",")
ene2019_03<-read.csv("Input/ene2019_03.csv",sep = ",")
ene2019_04<-read.csv("Input/ene2019_04.csv",sep = ",")
ene2019_05<-read.csv("Input/ene2019_05.csv",sep = ",")
ene2019_06<-read.csv("Input/ene2019_06.csv",sep = ",")
ene2019_07<-read.csv("Input/ene2019_07.csv",sep = ",")
ene2019_08<-read.csv("Input/ene2019_08.csv",sep = ",")
ene2019_09<-read.csv("Input/ene2019_09.csv",sep = ",")
ene2019_10<-read.csv("Input/ene2019_10.csv",sep = ",")
ene2019_11<-read.csv("Input/ene2019_11.csv",sep = ",")
ene2019_12<-read.csv("Input/ene2019_12.csv",sep = ";")
ene2020_01<-read.csv("Input/ene2020_01.csv",sep = ";")
ene2020_02<-read.csv("Input/ene2020_02.csv",sep = ";")
ene2020_03<-read.csv("Input/ene2020_03.csv",sep = ";")
ene2020_04<-read.csv("Input/ene2020_04.csv",sep = ";")
ene2020_05<-read.csv("Input/ene2020_05.csv",sep = ";")
ene2020_06<-read.csv("Input/ene2020_06.csv",sep = ";")
ene2020_07<-read.csv("Input/ene2020_07.csv",sep = ";")
ene2020_08<-read.csv("Input/ene2020_08.csv",sep = ";")
ene2020_09<-read.csv("Input/ene2020_09.csv",sep = ";")
ene2020_10<-read.csv("Input/ene2020_10.csv",sep = ";")
ene2020_11<-read.csv("Input/ene2020_11.csv",sep = ";")
ene2020_12<-read.csv("Input/ene2020_12.csv",sep = ";")
## TCP mujeres
## De esta forma la ENE calcula a las TCP: 184.440
ene2020_10 %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
## Informalidad ENE: 76.233. Formales: 108.201
ene2020_10 %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% group_by(ocup_form) %>% summarise(sum(fact_cal))
#b7a_1 Su empleador, ¿cotiza por usted en el sistema previsional o de pensión?
#b7a_2 Su empleador, ¿cotiza por usted en el sistema de salud (público o privado)?
#b7a_3 Su empleador, ¿cotiza por usted en el sistema de seguro de desempleo?
#b8 En ese empleo, ¿tiene contrato escrito?
#b11_proxy ¿El pago por su actividad principal fue a través de sueldo, salario o jornal?
# ¿Como se construyó variable ocup form?
ene2020_10 <- ene2020_10 %>% mutate(ocup_proxy=case_when(b7a_1==1 & (b7a_2==88 | b7a_2==99) ~ 1,
(b7a_1==88|b7a_1==99 ) & b7a_2==1 ~ 1,
(b7a_1==88|b7a_1==99) & (b7a_2==88|b7a_2==99) ~ 1,
TRUE~0))
table(ene2020_10$ocup_proxy)
## Formales (diferencia de 209 expandido)
ene2020_10 %>%
filter(b5==3 & (b6==1|b6==2) & sexo==2) %>%
filter(b7a_1==1 & b7a_2==1 & b8==1 & b11_proxy==1 | ocup_proxy==1) %>%
select(fact_cal) %>% sum()
## Informales (funciona)
ene2020_10 %>%
filter(b5==3 & (b6==1|b6==2) & sexo==2) %>%
filter( (b7a_1==2 | b7a_2==2)  |
( ocup_proxy==1 & b8==2 )  |
(ocup_proxy==1 & b8==1 & (b11_proxy==2 | b11_proxy==88 | b11_proxy==99 | is.na(b11_proxy)) ) |
(ocup_proxy==1 & (b8==88 | b8==99 | is.na(b8)) )
) %>%
select(fact_cal) %>% sum()
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(i,base,dfs)
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
base<-ls() %>% as.data.frame()
names(base)<-"periodo"
base<-base %>% filter(periodo!="dfs")
base<-base %>% mutate(tcp_mujeres=NA)
for (i in 1:nrow(base)){
base[i,2]<-dfs[[i]] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
## Dar año y mes
base<-base %>% mutate(ano_trimestre=NA,mes_central=NA)
for (i in 1:nrow(base)){
base[i,3]<-dfs[[i]] %>% as.data.frame() %>% select(ano_trimestre) %>% slice(1)
base[i,4]<-dfs[[i]] %>% as.data.frame() %>% select(mes_central) %>% slice(1)
}
library(lubridate)
base<-base %>% mutate(trimestre=make_date(year=ano_trimestre,month = mes_central))
## Gráfico
base %>% ggplot(aes(x=trimestre,y=tcp_mujeres))+geom_line()+geom_point()
## Exportar base
library(writexl)
write_xlsx(base,"Output/tcp_mujeres.xlsx", col_names = TRUE,format_headers = TRUE)
#errores desde febrero a agosto
base[120,2]
#errores desde febrero a agosto
base[120,1]
#errores desde febrero a agosto
base[121,1]
ene2020_02 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
names(ene2020_02)
ene2020_02$b6
ene2020_02<-read.csv("Input/ene2020_02.csv",sep = ";")
download.file("https://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/bbdd/2020/formato-csv/ene-2020-02-efm.csv?sfvrsn=802abc6c_8&download=true",destfile = "Input/ene2020_02.csv",method = "libcurl")
ene2020_02<-read.csv("Input/ene2020_02.csv",sep = ";")
ene2020_02 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
names(ene2020_02)
ene2020_05 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
ene2020_02<-read.csv("Input/ene-2020-02-efm(1).csv",sep = ";")
names(ene2020_02)
ene2020_02 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
ene2020_02<-read.csv("Input/ene-2020-02-efm(1).csv",sep = ";")
ene2020_02 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
names(ene2020_02)
ene2020_02 %>% as.data.frame() %>% filter((b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
ene2020_02 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% select(fact_cal) %>% sum()
ene2020_02 %>% as.data.frame() %>% filter(categoria_ocupacion==5 | categoria_ocupacion==6) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
ene2020_02 %>% as.data.frame() %>% filter(categoria_ocupacion==5 | categoria_ocupacion==6) %>% filter(sexo==1) %>% select(fact_cal) %>% sum()
ene2020_02$fact_cal
names(ene2020_02)
library(haven)
## No se llega a los mismos valores que los cuadros estadísticos publicados con las bases csv entre febrero y agosto 2020.
## Las bases csv son 20.000 casos aprox más pequeñas que las .sav.
ene2020_02<-read_sav("Input/ene2020_02-efm.sav")
## No se llega a los mismos valores que los cuadros estadísticos publicados con las bases csv entre febrero y agosto 2020.
## Las bases csv son 20.000 casos aprox más pequeñas que las .sav.
ene2020_02<-read_sav("Input/ene-2020_02-efm.sav")
## No se llega a los mismos valores que los cuadros estadísticos publicados con las bases csv entre febrero y agosto 2020.
## Las bases csv son 20.000 casos aprox más pequeñas que las .sav.
ene2020_02<-read_sav("Input/ene-2020-02-efm.sav")
ene2020_02 %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
ene2020_03<-read_sav("Input/ene-2020-03-fma.sav")
ene2020_04<-read_sav("Input/ene-2020-04-mam.sav")
ene2020_05<-read_sav("Input/ene-2020-05-amj.sav")
ene2020_06<-read_sav("Input/ene-2020-06-mjj.sav")
ene2020_07<-read_sav("Input/ene-2020-07-jja.sav")
ene2020_08<-read_sav("Input/ene-2020-08-jas.sav")
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(i,base,dfs)
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
base<-ls() %>% as.data.frame()
names(base)<-"periodo"
base<-base %>% filter(periodo!="dfs")
base<-base %>% mutate(tcp_mujeres=NA)
for (i in 1:nrow(base)){
base[i,2]<-dfs[[i]] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
## Dar año y mes
base<-base %>% mutate(ano_trimestre=NA,mes_central=NA)
for (i in 1:nrow(base)){
base[i,3]<-dfs[[i]] %>% as.data.frame() %>% select(ano_trimestre) %>% slice(1)
base[i,4]<-dfs[[i]] %>% as.data.frame() %>% select(mes_central) %>% slice(1)
}
library(lubridate)
base<-base %>% mutate(trimestre=make_date(year=ano_trimestre,month = mes_central))
## Gráfico
base %>% ggplot(aes(x=trimestre,y=tcp_mujeres))+geom_line()+geom_point()
## Exportar base
library(writexl)
write_xlsx(base,"Output/tcp_mujeres.xlsx", col_names = TRUE,format_headers = TRUE)
## Gráfico
base %>% ggplot(aes(x=trimestre,y=tcp_mujeres))+geom_line()+geom_point()
ls()
save(ls(),file="Output/bases_INE_informalidad_2010-2020.Rdata")
a<-ls()
save(a,file="Output/bases_INE_informalidad_2010-2020.Rdata")
save(ene2010_02,
ene2010_03,
ene2010_04,
ene2010_05,
ene2010_06,
ene2010_07,
ene2010_08,
ene2010_09,
ene2010_10,
ene2010_11,
ene2010_12,
ene2011_01,
ene2011_02,
ene2011_03,
ene2011_04,
ene2011_05,
ene2011_06,
ene2011_07,
ene2011_08,
ene2011_09,
ene2011_10,
ene2011_11,
ene2011_12,
ene2012_01,
ene2012_02,
ene2012_03,
ene2012_04,
ene2012_05,
ene2012_06,
ene2012_07,
ene2012_08,
ene2012_09,
ene2012_10,
ene2012_11,
ene2012_12,
ene2013_01,
ene2013_02,
ene2013_03,
ene2013_04,
ene2013_05,
ene2013_06,
ene2013_07,
ene2013_08,
ene2013_09,
ene2013_10,
ene2013_11,
ene2013_12,
ene2014_01,
ene2014_02,
ene2014_03,
ene2014_04,
ene2014_05,
ene2014_06,
ene2014_07,
ene2014_08,
ene2014_09,
ene2014_10,
ene2014_11,
ene2014_12,
ene2015_01,
ene2015_02,
ene2015_03,
ene2015_04,
ene2015_05,
ene2015_06,
ene2015_07,
ene2015_08,
ene2015_09,
ene2015_10,
ene2015_11,
ene2015_12,
ene2016_01,
ene2016_02,
ene2016_03,
ene2016_04,
ene2016_05,
ene2016_06,
ene2016_07,
ene2016_08,
ene2016_09,
ene2016_10,
ene2016_11,
ene2016_12,
ene2017_01,
ene2017_02,
ene2017_03,
ene2017_04,
ene2017_05,
ene2017_06,
ene2017_07,
ene2017_08,
ene2017_09,
ene2017_10,
ene2017_11,
ene2017_12,
ene2018_01,
ene2018_02,
ene2018_03,
ene2018_04,
ene2018_05,
ene2018_06,
ene2018_07,
ene2018_08,
ene2018_09,
ene2018_10,
ene2018_11,
ene2018_12,
ene2019_01,
ene2019_02,
ene2019_03,
ene2019_04,
ene2019_05,
ene2019_06,
ene2019_07,
ene2019_08,
ene2019_09,
ene2019_10,
ene2019_11,
ene2019_12,
ene2020_01,
ene2020_02,
ene2020_03,
ene2020_04,
ene2020_05,
ene2020_06,
ene2020_07,
ene2020_08,
ene2020_09,
ene2020_10,file="Output/bases_INE_informalidad_2010-2020.Rdata")
get(load('Output/bases_INE_informalidad_2010-2020.Rdata'))
## TCP mujeres
## De esta forma la ENE calcula a las TCP: 184.440
ene2020_10 %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
## Informalidad ENE: 76.233. Formales: 108.201
ene2020_10 %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% group_by(ocup_form) %>% summarise(sum(fact_cal))
#### CALCULAR TCP MUJERES PARA CADA TRIMESTRE MOVIL
remove(i,base,dfs)
dfs <- Filter(function(x) is(x, "data.frame"), mget(ls()))
base<-ls() %>% as.data.frame()
names(base)<-"periodo"
base<-base %>% filter(periodo!="dfs")
base<-base %>% mutate(tcp_mujeres=NA)
for (i in 1:nrow(base)){
base[i,2]<-dfs[[i]] %>% as.data.frame() %>% filter(b5==3 & (b6==1|b6==2)) %>% filter(sexo==2) %>% select(fact_cal) %>% sum()
}
## Dar año y mes
base<-base %>% mutate(ano_trimestre=NA,mes_central=NA)
for (i in 1:nrow(base)){
base[i,3]<-dfs[[i]] %>% as.data.frame() %>% select(ano_trimestre) %>% slice(1)
base[i,4]<-dfs[[i]] %>% as.data.frame() %>% select(mes_central) %>% slice(1)
}
library(lubridate)
base<-base %>% mutate(trimestre=make_date(year=ano_trimestre,month = mes_central))
base
