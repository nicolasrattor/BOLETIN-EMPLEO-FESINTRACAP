library(ggpubr)
library(haven)
library(lubridate)
library(scales)
library(ggrepel)
mam<-read_excel("../Input/Tabulados ENE/serie.xlsx",sheet = 4)
colnames(mam)<-mam[5,]
mam<-mam[c(7:(nrow(mam)-12)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26)]
colnames(mam)<-c("ano",
"trimestre",
"ocupados",
"independientes",
"independientes_empleadores)",
"independientes_cuenta_propia",
"independientes_familiar",
"dependientes",
"asalariados",
"asalariados_privado",
"asalariados_publico",
"TCP",
"TCP_afuera",
"TCP_adentro")
mam<-mam %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
mam<-mam %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
mam
#### TCP general, adentro y afuera -   con   scale_x_date() ####
g1<-mam %>%
select(t,trimestre,TCP,TCP_afuera,TCP_adentro) %>% gather(categoria,trabajadores,-c(t,trimestre)) %>%
mutate(trabajadores=as.numeric(trabajadores)*1000) %>%
ggplot(aes( x = t, y = trabajadores, fill = categoria, color = categoria)) +
geom_line() + geom_point()  +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
scale_x_date(labels = date_format("%Y-%m"),
breaks='1 years') + labs(x="Tiempo",
y = "Trabajadoras",
caption = "Elaboración propia en base a Encuesta Nacional de Empleo del INE") +
geom_text_repel(aes(label=ifelse(trimestre=="Jul - Sep", format(round(trabajadores), big.mark = ".", scientific = FALSE),"")),
vjust=-3,colour="black")
ggsave(plot = g1,
filename = "../Output/Gráficos/Gráfico1_JAS.png",
device = "png",
dpi = "retina",
units = "cm",
width = 35,
height = 20)
mam<-read_excel("../Input/Tabulados Informalidad/serie2.xlsx",sheet = 4)
mam<-mam[7:44,]
mam<-mam[,c(1,2,4,6,8,10,12,14,16,18,20,22,24,26,28)]
colnames(mam)<-c("ano",
"trimestre",
"Total de ocupados (formales)",
"Empleadores (formales)",
"Trabajadores por cuenta propia (formales)",
"Asalariados del sector privado (formales)",
"Asalariados del sector público (formales)",
"TCP_formal",
"Total de ocupados (informales)",
"Empleadores (informales)"		,
"Trabajadores por cuenta propia (informales)",
"Trabajadores familiares no remunerados (informales)",
"Asalariados del sector privado (informales)",
"Asalariados del sector público (informales)",
"TCP_informal")
mam<-mam %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
mam<-mam %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
g2<-mam %>%
select(t,trimestre,
TCP_formal,
TCP_informal) %>%
gather(categoria,trabajadores,-c(t,trimestre)) %>%
mutate(trabajadores=as.numeric(trabajadores)*1000) %>%
ggplot(aes( x = t, y = trabajadores, fill = categoria, color = categoria)) +
geom_line() + geom_point() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
scale_x_date(labels = date_format("%Y-%m"),
breaks='1 years') +
labs(x="Tiempo",
y = "Trabajadoras",
caption = "Elaboración propia en base a Encuesta Nacional de Empleo del INE") +
geom_text_repel(aes(label=ifelse(trimestre%in%c("Jul - Sep","Dic - Feb"), format(round(trabajadores), big.mark = ".", scientific = FALSE),"")),
vjust=-3,colour="black")
ggsave(plot = g2,
filename = "../Output/Gráficos/Gráfico2_JAS.png",
device = "png",
dpi = "retina",
units = "cm",
width = 35,
height = 20)
mam<-read_excel("../Input/Tabulados ENE/serie.xlsx",sheet = 4)
colnames(mam)<-mam[5,]
mam<-mam[c(7:(nrow(mam)-12)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26)]
colnames(mam)<-c("ano",
"trimestre",
"ocupados",
"independientes",
"independientes_empleadores)",
"independientes_cuenta_propia",
"independientes_familiar",
"dependientes",
"asalariados",
"asalariados_privado",
"asalariados_publico",
"TCP",
"TCP_afuera",
"TCP_adentro")
mam<-mam %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
mam<-mam %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
mam
View(mam)
nrow(mam)
mam[nrow(mam),12]
mam[nrow(mam),12]*100
as.numeric(mam[nrow(mam),12])*100
as.numeric(mam[nrow(mam),12])*1000
round(as.numeric(mam[nrow(mam),12]))*1000
round(as.numeric(mam[nrow(mam),12])*1000)
round(as.numeric(mam[nrow(mam),12])*1000)
r round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam)-12,12])*1000)
(round(as.numeric(mam[nrow(mam)-12,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000))
(round(as.numeric(mam[nrow(mam)-12,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000))/(round(as.numeric(mam[nrow(mam),12])*1000))
((round(as.numeric(mam[nrow(mam)-12,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000)))/(round(as.numeric(mam[nrow(mam),12])*1000))
((round(as.numeric(mam[nrow(mam)-12,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000)))/(round(as.numeric(mam[nrow(mam)-12,12])*1000))
round((((round(as.numeric(mam[nrow(mam)-12,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000)))/(round(as.numeric(mam[nrow(mam)-12,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam)-1,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000)))/(round(as.numeric(mam[nrow(mam)-1,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam)-1,12])*1000))-(round(as.numeric(mam[nrow(mam),12])*1000)))/(round(as.numeric(mam[nrow(mam)-1,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-1,12])*1000)))/(round(as.numeric(mam[nrow(mam)-1,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-1,12])*1000)))/(round(as.numeric(mam[nrow(mam)-1,12])*1000)))*100,1)
r round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam)-12,12])*1000)
View(mam)
r round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))/(round(as.numeric(mam[nrow(mam)-3,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))/(round(as.numeric(mam[nrow(mam)-3,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000))
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))/(round(as.numeric(mam[nrow(mam)-3,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))/(round(as.numeric(mam[nrow(mam)-3,12])*1000)))*100,1)
(((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000)))/(round(as.numeric(mam[nrow(mam)-3,12])*1000)))*100
(round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000))
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2); theme_set(theme_bw() + theme(legend.position="bottom",
axis.text=element_text(size=13),
axis.title=element_text(size=14,face="bold"),
plot.title = element_text(size=14,face="bold")))
options(scipen=999)
library(knitr)
knit_hooks$set(inline = function(x) {
prettyNum(x,
big.mark=".",
decimal.mark = ",")
})
## Anotar cuestiones generales
mes_central<-"agosto"
n_boletin<-"tercero"
library(tidyverse)
library(readxl)
library(srvyr)
library(dplyr)
library(survey)
library(ggpubr)
library(haven)
library(lubridate)
library(scales)
library(ggrepel)
mam<-read_excel("../Input/Tabulados ENE/serie.xlsx",sheet = 4)
colnames(mam)<-mam[5,]
mam<-mam[c(7:(nrow(mam)-12)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26)]
colnames(mam)<-c("ano",
"trimestre",
"ocupados",
"independientes",
"independientes_empleadores)",
"independientes_cuenta_propia",
"independientes_familiar",
"dependientes",
"asalariados",
"asalariados_privado",
"asalariados_publico",
"TCP",
"TCP_afuera",
"TCP_adentro")
mam<-mam %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
mam<-mam %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
mam
inf<-read_excel("../Input/Tabulados Informalidad/serie2.xlsx",sheet = 4)
inf<-inf[7:44,]
inf<-inf[,c(1,2,4,6,8,10,12,14,16,18,20,22,24,26,28)]
colnames(inf)<-c("ano",
"trimestre",
"Total de ocupados (formales)",
"Empleadores (formales)",
"Trabajadores por cuenta propia (formales)",
"Asalariados del sector privado (formales)",
"Asalariados del sector público (formales)",
"TCP_formal",
"Total de ocupados (informales)",
"Empleadores (informales)"		,
"Trabajadores por cuenta propia (informales)",
"Trabajadores familiares no remunerados (informales)",
"Asalariados del sector privado (informales)",
"Asalariados del sector público (informales)",
"TCP_informal")
inf<-inf %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
inf<-inf %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
#### TCP general, adentro y afuera -   con   scale_x_date() ####
g1<-mam %>%
select(t,trimestre,TCP,TCP_afuera,TCP_adentro) %>% gather(categoria,trabajadores,-c(t,trimestre)) %>%
mutate(trabajadores=as.numeric(trabajadores)*1000) %>%
ggplot(aes( x = t, y = trabajadores, fill = categoria, color = categoria)) +
geom_line() + geom_point()  +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
scale_x_date(labels = date_format("%Y-%m"),
breaks='1 years') + labs(x="Tiempo",
y = "Trabajadoras",
caption = "Elaboración propia en base a Encuesta Nacional de Empleo del INE") +
geom_text_repel(aes(label=ifelse(trimestre=="Jul - Sep", format(round(trabajadores), big.mark = ".", scientific = FALSE),"")),
vjust=-3,colour="black")
ggsave(plot = g1,
filename = "../Output/Gráficos/Gráfico1_JAS.png",
device = "png",
dpi = "retina",
units = "cm",
width = 35,
height = 20)
g2<-inf %>%
select(t,trimestre,
TCP_formal,
TCP_informal) %>%
gather(categoria,trabajadores,-c(t,trimestre)) %>%
mutate(trabajadores=as.numeric(trabajadores)*1000) %>%
ggplot(aes( x = t, y = trabajadores, fill = categoria, color = categoria)) +
geom_line() + geom_point() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
scale_x_date(labels = date_format("%Y-%m"),
breaks='1 years') +
labs(x="Tiempo",
y = "Trabajadoras",
caption = "Elaboración propia en base a Encuesta Nacional de Empleo del INE") +
geom_text_repel(aes(label=ifelse(trimestre%in%c("Jul - Sep","Dic - Feb"), format(round(trabajadores), big.mark = ".", scientific = FALSE),"")),
vjust=-3,colour="black")
ggsave(plot = g2,
filename = "../Output/Gráficos/Gráfico2_JAS.png",
device = "png",
dpi = "retina",
units = "cm",
width = 35,
height = 20)
(round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-3,12])*1000))
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000)))/(round(as.numeric(mam[nrow(mam)-12,12])*1000)))*100,1)
round((((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000)))
(((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000))
(((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000))
((round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam),12])*1000))-(round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam),12])*1000)) - (round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam),12])*1000)) - (round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam)-12,12])*1000))
(round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam)-12,12])*1000)
-round(as.numeric(mam[nrow(mam),12])*1000)-round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam),12])*1000)-round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam),12])*1000)-round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam),12])*1000)-round(as.numeric(mam[nrow(mam)-12,12])*1000)
round(as.numeric(mam[nrow(mam),14])*1000))
round(as.numeric(mam[nrow(mam),14])*1000)
View(inf)
inf<-read_excel("../Input/Tabulados Informalidad/serie2.xlsx",sheet = 4)
View(inf)
inf<-read_excel("../Input/Tabulados Informalidad/serie2.xlsx",sheet = 4)
inf<-inf[c(7:(nrow(mam)-9)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26,28)]
inf<-read_excel("../Input/Tabulados Informalidad/serie2.xlsx",sheet = 4)
inf<-inf[c(7:(nrow(inf)-9)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26,28)]
View(inf)
colnames(inf)<-c("ano",
"trimestre",
"Total de ocupados (formales)",
"Empleadores (formales)",
"Trabajadores por cuenta propia (formales)",
"Asalariados del sector privado (formales)",
"Asalariados del sector público (formales)",
"TCP_formal",
"Total de ocupados (informales)",
"Empleadores (informales)"		,
"Trabajadores por cuenta propia (informales)",
"Trabajadores familiares no remunerados (informales)",
"Asalariados del sector privado (informales)",
"Asalariados del sector público (informales)",
"TCP_informal")
inf<-inf %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
inf<-inf %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
View(inf)
inf[nrow(inf),8]
as.numeric(inf[nrow(inf),8])
as.numeric(inf[nrow(inf),8])*1000
as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15])
as.numeric(inf[nrow(inf),15])/(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15]))
as.numeric(inf[nrow(inf),8])/(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15]))
as.numeric(inf[nrow(inf),15])/(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15]))
(as.numeric(inf[nrow(inf),15])/(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15])))*100
round((as.numeric(inf[nrow(inf),15])/(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15])))*100,1)
round((as.numeric(inf[nrow(inf),15])/(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15])))*100,1)
(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15])))
(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15]))
(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15]))
(as.numeric(inf[nrow(inf),8])+as.numeric(inf[nrow(inf),15]))
(as.numeric(inf[nrow(inf)-12,8])+as.numeric(inf[nrow(inf)-12,15]))
(as.numeric(inf[nrow(inf)-12,15])+as.numeric(inf[nrow(inf)-12,15]))
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))
round((as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))*1000)
round((as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))*1000)
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/(as.numeric(inf[nrow(inf)-12,15])
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/(as.numeric(inf[nrow(inf)-12,15])
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/(as.numeric(inf[nrow(inf)-12,15])
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/(as.numeric(inf[nrow(inf)-12,15])
(as.numeric(inf[nrow(inf)-12,15])
as.numeric(inf[nrow(inf)-12,15])
as.numeric(inf[nrow(inf)-12,15]
as.numeric(inf[nrow(inf)-12,15])
inf[nrow(inf)-12,15]
as.numeric(inf[nrow(inf)-12,15])
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/as.numeric(inf[nrow(inf)-12,15])
(as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/as.numeric(inf[nrow(inf)-12,15])*100
round((as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/as.numeric(inf[nrow(inf)-12,15])*100,1)
round((as.numeric(inf[nrow(inf)-12,15])-as.numeric(inf[nrow(inf),15]))/as.numeric(inf[nrow(inf)-12,15])*100,1)
round((as.numeric(inf[nrow(inf)-12,8])-as.numeric(inf[nrow(inf),8]))/as.numeric(inf[nrow(inf)-12,8])*100,1)
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2); theme_set(theme_bw() + theme(legend.position="bottom",
axis.text=element_text(size=13),
axis.title=element_text(size=14,face="bold"),
plot.title = element_text(size=14,face="bold")))
options(scipen=999)
library(knitr)
knit_hooks$set(inline = function(x) {
prettyNum(x,
big.mark=".",
decimal.mark = ",")
})
mam<-read_excel("../Input/Tabulados ENE/serie.xlsx",sheet = 4)
library(tidyverse)
library(readxl)
library(srvyr)
library(dplyr)
library(survey)
library(ggpubr)
library(haven)
library(lubridate)
library(scales)
library(ggrepel)
mam<-read_excel("../Input/Tabulados ENE/serie.xlsx",sheet = 4)
View(mam)
mam<-mam[c(7:(nrow(mam)-12)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26)]
colnames(mam)<-c("ano",
"trimestre",
"ocupados",
"independientes",
"independientes_empleadores)",
"independientes_cuenta_propia",
"independientes_familiar",
"dependientes",
"asalariados",
"asalariados_privado",
"asalariados_publico",
"TCP",
"TCP_afuera",
"TCP_adentro")
mam<-mam %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
View(mam)
mam<-mam %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
mam
inf<-read_excel("../Input/Tabulados Informalidad/serie2.xlsx",sheet = 4)
inf<-inf[c(7:(nrow(inf)-9)),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26,28)]
colnames(inf)<-c("ano",
"trimestre",
"Total de ocupados (formales)",
"Empleadores (formales)",
"Trabajadores por cuenta propia (formales)",
"Asalariados del sector privado (formales)",
"Asalariados del sector público (formales)",
"TCP_formal",
"Total de ocupados (informales)",
"Empleadores (informales)"		,
"Trabajadores por cuenta propia (informales)",
"Trabajadores familiares no remunerados (informales)",
"Asalariados del sector privado (informales)",
"Asalariados del sector público (informales)",
"TCP_informal")
inf<-inf %>% mutate(mes=case_when(trimestre == "Ene - Mar"~ 2,
trimestre == "Feb - Abr"~ 3,
trimestre == "Mar - May"~ 4,
trimestre == "Abr - Jun"~ 5,
trimestre == "May -Jul"~ 6,
trimestre == "Jun - Ago"~ 7,
trimestre == "Jul - Sep"~ 8,
trimestre == "Ago - Oct"~ 9,
trimestre == "Sep - Nov"~ 10,
trimestre == "Oct - Dic"~ 11,
trimestre == "Nov - Ene"~ 12,
trimestre == "Dic - Feb"~  1))
inf<-inf %>% mutate(t=ymd(paste(ano,"-",mes,"-",1,sep="")))
mam %>%
select(t,trimestre,TCP,TCP_afuera,TCP_adentro) %>% gather(categoria,trabajadores,-c(t,trimestre)) %>%
mutate(trabajadores=as.numeric(trabajadores)*1000) %>%
ggplot(aes( x = t, y = trabajadores, fill = categoria, color = categoria)) +
geom_line() + geom_point()  +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
scale_x_date(labels = date_format("%Y-%m"),
breaks='1 years') + labs(x="Tiempo",
y = "Trabajadoras",
caption = "Elaboración propia en base a Encuesta Nacional de Empleo del INE") +
geom_text_repel(aes(label=ifelse(trimestre=="Ago - Oct", format(round(trabajadores), big.mark = ".", scientific = FALSE),"")),
vjust=-3,colour="black")
g1<-mam %>%
select(t,trimestre,TCP,TCP_afuera,TCP_adentro) %>% gather(categoria,trabajadores,-c(t,trimestre)) %>%
mutate(trabajadores=as.numeric(trabajadores)*1000) %>%
ggplot(aes( x = t, y = trabajadores, fill = categoria, color = categoria)) +
geom_line() + geom_point()  +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
scale_x_date(labels = date_format("%Y-%m"),
breaks='1 years') + labs(x="Tiempo",
y = "Trabajadoras",
caption = "Elaboración propia en base a Encuesta Nacional de Empleo del INE") +
geom_text_repel(aes(label=ifelse(trimestre=="Ago - Oct", format(round(trabajadores), big.mark = ".", scientific = FALSE),"")),
vjust=-3,colour="black")
ggsave(plot = g1,
filename = "../Output/Gráficos/Gráfico1_ASO.png",
device = "png",
dpi = "retina",
units = "cm",
width = 35,
height = 20)
